<!DOCTYPE html>
<html>
<head>
    <!--meta http-equiv='refresh' content='5'-->
    <style>
    </style>
    <title data-ng-bind='title'>ROBONOVA</title>
    <meta charset='utf-8' />
    <meta http-equiv='X-UA-Compatible' content='IE=edge, chrome=1' />
    <link href='/css/styles.css' rel='stylesheet' />
    <script src='https://code.jquery.com/jquery-latest.min.js'></script>
<script>
jQuery(document).ready(function() {
console.log(' document ready');
#offset var offset = %s;
var mod  = "klok";


jQuery('.tabs .tab-links a').on('click', function(e)  {
    var currentAttrValue = jQuery(this).attr('href');

    console.log(' tabs .tab-links on click ' +  currentAttrValue);

    // Show/Hide Tabs
    jQuery('.tabs ' + currentAttrValue).show().siblings().hide();

    // Change/remove current tab to active
    jQuery(this).parent('li').addClass('active').siblings().removeClass('active');

    e.preventDefault();

});
jQuery('#sync').on('click', function(e)  {
    var now = new Date();
    var sendTime = {
      hour: now.getHours(),
      minute:now.getMinutes(),
      second:now.getSeconds()
    }
    t = JSON.stringify(sendTime)
    console.log('Sync clicked pc time: %s'%t);
    $.post('/time/set',t )
});
jQuery('#gettime').on('click', function(e)  {
    console.log('gettime clicked ');
    askTime();
});

function setPixel(){
    console.log('set pixel');
     i = $('#input_I').val(); 
     r = $('#input_R').val(); 
     g = $('#input_G').val();
     b = $('#input_B').val();
     if (mod ==="pixel")
        $.get("mode/pixel",{i:i,r:r,g:g,b:b});
     if (mod ==="color")
        $.get("mode/color",{r:r,g:g,b:b});
}

jQuery('#input_R').on('change', function(e)  {
    setPixel();
});
jQuery('#input_G').on('change', function(e)  {
    setPixel();
});
jQuery('#input_B').on('change', function(e)  {
    setPixel();
});
jQuery('#input_I').on('change', function(e)  {
    setPixel();
});

function setOffset(delta){
    console.log('set offset');
    offset +=delta;
    offset %=60;
    if (offset < 0)
        offset = 60 - offset;
    var value = { pos: offset }
    $.post('/settings/offset',JSON.stringify(value) )
}


jQuery('#input_brightness').on('change', function(e)  {
    var value = { v: $('#input_brightness').val() }
    $.post('/settings/brightness',JSON.stringify(value) )
});
jQuery('#m10').on('click', function(e)  {
    setOffset(-10)
});
jQuery('#m1').on('click', function(e)  {
    setOffset(-1)
});
jQuery('#p1').on('click', function(e)  {
    setOffset(1)
});
jQuery('#p10').on('click', function(e)  {
    setOffset(10)
});

jQuery('#input_quarters').on('change', function(e)  {
    var value = { v: $('#input_quarters').val() }
    $.post('/settings/quarters',JSON.stringify(value) )
});
jQuery('#mode_pixel').on('click', function(e)  {
    mod  = "pixel";
    console.log('mode pixel clicked ');
    setPixel()
});
jQuery('#mode_color').on('click', function(e)  {
    console.log('mode color clicked ');
    mod  = "color";
     i = $('#input_I').val(); 
     r = $('#input_R').val(); 
     g = $('#input_G').val();
     b = $('#input_B').val();
    $.get("mode/color",{r:r,g:g,b:b});
});
jQuery('#mode_klok').on('click', function(e)  {
    console.log('mode klok clicked ');
    mod  = "klok";
    $.get("mode/klok");
});
jQuery('#mode_rainbow').on('click', function(e)  {
    console.log('mode rainbow clicked ');
    $.get("mode/rainbow");
});



jQuery('.all_servos').on('change', function(e)  {
    var value = { id:$(this).attr('id') , group:$(this).attr('group') , pos: $(this).val() }
    $.post('/servos/position',JSON.stringify(value) )
});

jQuery('#inl_all').on('change', function(e)  {
    var value = { group:"L" , pos: $('#inl_all').val() }
    $.post('/servos/all',JSON.stringify(value) )
});

jQuery('#button_servoIdL').on('click', function(e)  {
    newId = $('#input_servoIdL').val()
    console.log('setId for left group newId:', newId);
    var value = { id: newId, group:"L" }
    $.post('/servos/id',JSON.stringify(value) )
});
jQuery('#button_servoIdR').on('click', function(e)  {
    newId = $('#input_servoIdR').val()
    console.log('setId for left group newId:', newId);
    var value = { id: newId, group:"R" }
    $.post('/servos/id',JSON.stringify(value) )
});


var getPositionL = function () {
    $.ajax({
        url: '/servos/positions?group=L',
        success: function(data, status, xhdr)
                {
                    jQuery('#left_zero').text ( data[0] );
                    jQuery('#left_shTurn').text ( data[1] );
                    jQuery('#left_shUp').text ( data[2] );
                    jQuery('#left_elbow').text ( data[3] );
                    jQuery('#left_hipTurn').text ( data[4] );
                    jQuery('#left_hipUp').text ( data[5] );
                    jQuery('#left_knee').text ( data[6] );
                    jQuery('#left_enkle').text ( data[7] );
                    jQuery('#left_foot').text ( data[8] );
                },
        dataType: 'json'
    }).fail( function(xhr, status, error) {
        console.log("An AJAX error occured: " + status + "\nError: " + error + "\nError detail: " + xhr.responseText);
    });
}
var getPositionR = function () {
    $.ajax({
        url: '/servos/positions?group=R',
        success: function(data, status, xhdr)
                {
                    jQuery('#right_zero').text ( data[0] );
                    jQuery('#right_shTurn').text ( data[1] );
                    jQuery('#right_shUp').text ( data[2] );
                    jQuery('#right_elbow').text ( data[3] );
                    jQuery('#right_hipTurn').text ( data[4] );
                    jQuery('#right_hipUp').text ( data[5] );
                    jQuery('#right_knee').text ( data[6] );
                    jQuery('#right_enkle').text ( data[7] );
                    jQuery('#right_foot').text ( data[8] );
                },
        dataType: 'json'
    }).fail( function(xhr, status, error) {
        console.log("An AJAX error occured: " + status + "\nError: " + error + "\nError detail: " + xhr.responseText);
    });
}
var t = setInterval(getPositionL,1000);

});
</script>
</head>
<body>

    <header class='site-header'>
        <div class = 'header'>
            <div class='header-text'>
            <table class ='table-header'><tr>
                <td>Klok tijd:  </td>
                <td id ='label_now' class='current_time'>00h 00m 00s<//td>
                <td >
                    <button id='sync' class='button' type='button'>Sync met PC</button>
                </td>
            </tr></table>
            </div>
         </div>
    </header>


    <div class='tabs'>
        <ul class='tab-links'>
            <li><a href='#tab_ap'>Access Point</a></li>
            <li class='active'><a href='#tab_wifi'>WiFi</a></li>
            <li ><a href='#tab_servos'>Servo Control</a></li>
            <li ><a href='#tab_settings'>Settings</a></li>
        </ul>

        <div class='tab-content'>
            <div id='tab_ap' class='tab'>
                  <br>
                  Vraag een lijst op van aanwezig WIFI access points (AP) in de buurt<br>
                  Het opvragen kan enkele seconden duren ...<br><br><br>
                  <a href="/aplist.html">
                        <button id='sync' class='button' type='button'>Opvragen WIFI access points</button>
                  </a>  
            </div>
            <div id='tab_wifi' class='tab active '>
                <div>
                <table class ='table-header'>
                    <th
                        <td>wifi status:</td>
#status                   <td>%s<td/>
                    </th>
 
                    <tr>
                        <td>wifi status:</td>
#status                   <td>%s<td/>
                    </tr>
                    <tr>
                        <td>ip adres:</td>
#ip                        <td>%s<td/>
                    </tr>

                </table>
                </div>
                <div>
                </div>

            </div>


            <div id='tab_servos' class='tab '>

            <table class ='table'>
                    <th class ='table-header'>
                        <td>Left Side</td>
                        <td>Right Side</td>
                    </th><tr><td>    

                <table class ='table'>
                    <th class ='table-header'>
                        <td>Joint</td>
                        <td>Pos</td>
                        <td>Set Position</td>
                    </th><tr>    
                        <td>zeroId</td>
                        <td id='left_zero'>1500</td>
<td><input class="all_servos" group="L" id='0' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>shTurn</td>
                        <td id='left_shTurn'>1500</td>
<td><input class="all_servos" group="L" id='1' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>shUp</td>
                        <td id='left_shUp'>1500</td>
<td><input class="all_servos" group="L" id='2' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>Elbow</td>
                        <td id='left_elbow'>1500</td>
<td><input class="all_servos" group="L" id='3' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>hipTurn</td>
                        <td id='left_hipTurn'>1500</td>
<td><input class="all_servos" group="L" id='4' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>hipUp</td>
                        <td id='left_hipUp'>1500</td>
<td><input class="all_servos" group="L" id='5' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>Knee</td>
                        <td id='left_knee'>1500</td>
<td><input class="all_servos" group="L" id='6' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>Enkle</td>
                        <td id='left_enkle'>1500</td>
<td><input class="all_servos" group="L" id='7' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>Foot</td>
                        <td id='left_foot'>1500</td>
<td><input class="all_servos" group="L" id='8' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>ALL</td>
                        <td id='left_all'>1500</td>
<td><input id='inl_all' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td><button id='button_servoIdL' class='button' type='button'>Set ID</button>
</td>
                        <td id='currentId'></td>
                        <td><input id="input_servoIdL" type="number"
                    value="1" min="0" max = "9"/></td>                         
                    </tr>
                </table>
            </td><td>    

                <table class ='table-header'>
                    <th>
                        <td>Joint</td>
                        <td>Pos</td>
                        <td>Set Position</td>
                    </th><tr>    
                        <td>zeroId</td>
                        <td id='right_zero'>1500</td>
<td><input class="all_servos" group="R" id='0' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>shTurn</td>
                        <td id='right_shTurn'>1500</td>
<td><input class="all_servos" group="R" id='1' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>shUp</td>
                        <td id='right_shUp'>1500</td>
<td><input class="all_servos" group="R" id='2' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>Elbow</td>
                        <td id='right_elbow'>1500</td>
<td><input class="all_servos" group="R" id='3' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>hipTurn</td>
                        <td id='right_hipTurn'>1500</td>
<td><input class="all_servos" group="R" id='4' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>hipUp</td>
                        <td id='right_hipUp'>1500</td>
<td><input class="all_servos" group="R" id='5' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>Knee</td>
                        <td id='right_knee'>1500</td>
<td><input class="all_servos" group="R" id='6' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>Enkle</td>
                        <td id='right_enkle'>1500</td>
<td><input class="all_servos" group="R" id='7' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>Foot</td>
                        <td id='left_foot'>1500</td>
<td><input class="all_servos" group="R" id='8' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td>ALL</td>
                        <td id='right_all'>1500</td>
<td><input id='inr_all' type='range' name='points' min='500' max='2500' value='1500'><td/>
                    </tr><tr>    
                        <td><button id='button_servoIdR' class='button' type='button'>Set ID</button>
</td>
                        <td id='currentId'></td>
                        <td><input id="input_servoIdR" type="number"
                    value="1" min="0" max = "9"/></td>                         
                    </tr>
                </table>
            </td></tr>  
            </td></table>  
            </div>

            <div id='tab_settings' class='tab' >
                <table class ='table-header'>
                    <tr>
                        <td>Helderheid</td>
#brightness  <td><input id='input_brightness' type='range' name='points' min='1' max='50' value='%s'><td/>
                    </tr>
                    <tr>
                        <td>Kwartieren</td>
#quarters    <td><input id='input_quarters' type='range' name='points' min='0' max='59' value='%s'><td/>
                    </tr>
                    <tr>
                        <td>Rotatie offset</td>
                        <td>  <button id='m10' class='button' type='button'>&lt;&lt;</button>
                              <button id='m1' class='button' type='button'>&lt;</button>
                              <button id='p1' class='button' type='button'>&gt;</button>
                              <button id='p10' class='button' type='button'>&gt;&gt;</button>1500</td>
                    </tr>
                </table>
            </div>

        </div>
    </div>


</body>
</html>





